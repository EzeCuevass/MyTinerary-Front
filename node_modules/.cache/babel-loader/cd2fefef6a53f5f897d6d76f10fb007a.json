{"ast":null,"code":"import axios from \"axios\";\nconst userActions = {\n  signUp: userData => {\n    return async (dispatch, getState) => {\n      try {\n        const res = await axios.post(\"http://localhost:4000/api/auth/signUp\", {\n          userData\n        });\n        dispatch({\n          type: \"MESSAGE\",\n          payload: {\n            view: true,\n            message: res.data.message,\n            success: res.data.success\n          }\n        });\n        console.log(res);\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n  },\n  signIn: logedUser => {\n    // console.log(logedUser)\n    try {\n      return async (dispatch, getState) => {\n        const res = await axios.post(\"http://localhost:4000/api/auth/signIn\", {\n          logedUser\n        }); // console.log(res)\n\n        if (res.data.success) {\n          // console.log(res.data.response);\n          localStorage.setItem(\"token\", res.data.response.token);\n          dispatch({\n            type: \"USER\",\n            payload: res.data.response.userData\n          });\n        } else {\n          dispatch({\n            type: 'MESSAGE',\n            payload: {\n              view: true,\n              message: res.data.message,\n              success: res.data.success\n            }\n          });\n        }\n\n        return res;\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  signOut: () => {\n    return async (dispatch, getState) => {\n      localStorage.removeItem(\"token\");\n      dispatch({\n        type: \"USER\",\n        payload: null\n      });\n    };\n  },\n  verifyToken: token => {\n    console.log(token);\n    return async (dispatch, getState) => {\n      await axios.get(\"http://localhost:4000/api/auth/signInToken\", {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(user => {\n        if (user.data.success) {\n          console.log(user);\n          dispatch({\n            type: \"USER\",\n            payload: user.data.response\n          });\n          dispatch({\n            type: \"MESSAGE\",\n            payload: {\n              view: true,\n              message: user.data.message,\n              success: user.data.success\n            }\n          });\n          console.log(\"lol\");\n        } else {\n          localStorage.removeItem(\"token\");\n          console.log(\"lol2\");\n        }\n      }).catch(error => {\n        console.log(\"lol\");\n        if (error.response.status === 401) dispatch({\n          type: \"MESSAGE\",\n          payload: {\n            view: true,\n            message: \"Please, sign in again\",\n            success: false\n          }\n        });\n        localStorage.removeItem(\"token\");\n      });\n    };\n  }\n};\nexport default userActions;","map":{"version":3,"names":["axios","userActions","signUp","userData","dispatch","getState","res","post","type","payload","view","message","data","success","console","log","error","signIn","logedUser","localStorage","setItem","response","token","signOut","removeItem","verifyToken","get","headers","then","user","catch","status"],"sources":["C:/Users/Eze/Desktop/Bootcamp/MyTinerary/mytinerary/frontend/src/redux/actions/userActions.js"],"sourcesContent":["import axios from \"axios\";\r\nconst userActions = {\r\n    signUp: (userData) => {\r\n        return async(dispatch, getState) => {\r\n            try {\r\n                const res = await axios.post(\"http://localhost:4000/api/auth/signUp\",{userData})\r\n                dispatch({type: \"MESSAGE\",\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    }\r\n                })\r\n                console.log(res);\r\n                return res\r\n            } catch(error){\r\n                console.log(error);\r\n            }\r\n        }\r\n    },\r\n    signIn: (logedUser) => {\r\n        // console.log(logedUser)\r\n        try {\r\n            return async (dispatch, getState) => {\r\n            const res = await axios.post(\"http://localhost:4000/api/auth/signIn\",{logedUser})\r\n            // console.log(res)\r\n            if (res.data.success) {\r\n                // console.log(res.data.response);\r\n                localStorage.setItem(\"token\", res.data.response.token)\r\n                dispatch({type:\"USER\", payload: res.data.response.userData})\r\n            } else {\r\n                dispatch({\r\n                    type: 'MESSAGE',\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    },\r\n                })\r\n            }\r\n            return res\r\n        }} catch (error){\r\n            console.log(error);\r\n        }\r\n        \r\n    },\r\n    signOut: () => {\r\n        return async (dispatch, getState) => {\r\n            localStorage.removeItem(\"token\")\r\n            dispatch({type:\"USER\", payload:null})\r\n        }\r\n    },\r\n    verifyToken: (token) => {\r\n        console.log(token);\r\n        return async (dispatch, getState) => {\r\n            await axios.get(\"http://localhost:4000/api/auth/signInToken\", {headers:{'Authorization': 'Bearer ' + token}})\r\n            .then(user=>{if (user.data.success){\r\n                console.log(user);\r\n                dispatch({type:\"USER\",payload:user.data.response})\r\n                dispatch({type:\"MESSAGE\",\r\n                            payload: {\r\n                                view:true,\r\n                                message:user.data.message,\r\n                                success:user.data.success\r\n                            }})\r\n                            console.log(\"lol\");\r\n            }else{localStorage.removeItem(\"token\")\r\n            console.log(\"lol2\")}\r\n        }\r\n        ).catch(error=>{\r\n            console.log(\"lol\");\r\n            if (error.response.status === 401)\r\n                dispatch({type:\"MESSAGE\",\r\n                            payload:{\r\n                                view:true,\r\n                                message:\"Please, sign in again\",\r\n                                success: false,\r\n                            }})\r\n            localStorage.removeItem(\"token\")\r\n        })\r\n        }\r\n    }\r\n}\r\n\r\nexport default userActions\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,WAAW,GAAG;EAChBC,MAAM,EAAGC,QAAD,IAAc;IAClB,OAAO,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;MAChC,IAAI;QACA,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,uCAAX,EAAmD;UAACJ;QAAD,CAAnD,CAAlB;QACAC,QAAQ,CAAC;UAACI,IAAI,EAAE,SAAP;UACLC,OAAO,EAAE;YACLC,IAAI,EAAE,IADD;YAELC,OAAO,EAAEL,GAAG,CAACM,IAAJ,CAASD,OAFb;YAGLE,OAAO,EAAEP,GAAG,CAACM,IAAJ,CAASC;UAHb;QADJ,CAAD,CAAR;QAOAC,OAAO,CAACC,GAAR,CAAYT,GAAZ;QACA,OAAOA,GAAP;MACH,CAXD,CAWE,OAAMU,KAAN,EAAY;QACVF,OAAO,CAACC,GAAR,CAAYC,KAAZ;MACH;IACJ,CAfD;EAgBH,CAlBe;EAmBhBC,MAAM,EAAGC,SAAD,IAAe;IACnB;IACA,IAAI;MACA,OAAO,OAAOd,QAAP,EAAiBC,QAAjB,KAA8B;QACrC,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,uCAAX,EAAmD;UAACW;QAAD,CAAnD,CAAlB,CADqC,CAErC;;QACA,IAAIZ,GAAG,CAACM,IAAJ,CAASC,OAAb,EAAsB;UAClB;UACAM,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8Bd,GAAG,CAACM,IAAJ,CAASS,QAAT,CAAkBC,KAAhD;UACAlB,QAAQ,CAAC;YAACI,IAAI,EAAC,MAAN;YAAcC,OAAO,EAAEH,GAAG,CAACM,IAAJ,CAASS,QAAT,CAAkBlB;UAAzC,CAAD,CAAR;QACH,CAJD,MAIO;UACHC,QAAQ,CAAC;YACLI,IAAI,EAAE,SADD;YAELC,OAAO,EAAE;cACLC,IAAI,EAAE,IADD;cAELC,OAAO,EAAEL,GAAG,CAACM,IAAJ,CAASD,OAFb;cAGLE,OAAO,EAAEP,GAAG,CAACM,IAAJ,CAASC;YAHb;UAFJ,CAAD,CAAR;QAQH;;QACD,OAAOP,GAAP;MACH,CAlBG;IAkBF,CAnBF,CAmBG,OAAOU,KAAP,EAAa;MACZF,OAAO,CAACC,GAAR,CAAYC,KAAZ;IACH;EAEJ,CA5Ce;EA6ChBO,OAAO,EAAE,MAAM;IACX,OAAO,OAAOnB,QAAP,EAAiBC,QAAjB,KAA8B;MACjCc,YAAY,CAACK,UAAb,CAAwB,OAAxB;MACApB,QAAQ,CAAC;QAACI,IAAI,EAAC,MAAN;QAAcC,OAAO,EAAC;MAAtB,CAAD,CAAR;IACH,CAHD;EAIH,CAlDe;EAmDhBgB,WAAW,EAAGH,KAAD,IAAW;IACpBR,OAAO,CAACC,GAAR,CAAYO,KAAZ;IACA,OAAO,OAAOlB,QAAP,EAAiBC,QAAjB,KAA8B;MACjC,MAAML,KAAK,CAAC0B,GAAN,CAAU,4CAAV,EAAwD;QAACC,OAAO,EAAC;UAAC,iBAAiB,YAAYL;QAA9B;MAAT,CAAxD,EACLM,IADK,CACAC,IAAI,IAAE;QAAC,IAAIA,IAAI,CAACjB,IAAL,CAAUC,OAAd,EAAsB;UAC/BC,OAAO,CAACC,GAAR,CAAYc,IAAZ;UACAzB,QAAQ,CAAC;YAACI,IAAI,EAAC,MAAN;YAAaC,OAAO,EAACoB,IAAI,CAACjB,IAAL,CAAUS;UAA/B,CAAD,CAAR;UACAjB,QAAQ,CAAC;YAACI,IAAI,EAAC,SAAN;YACGC,OAAO,EAAE;cACLC,IAAI,EAAC,IADA;cAELC,OAAO,EAACkB,IAAI,CAACjB,IAAL,CAAUD,OAFb;cAGLE,OAAO,EAACgB,IAAI,CAACjB,IAAL,CAAUC;YAHb;UADZ,CAAD,CAAR;UAMYC,OAAO,CAACC,GAAR,CAAY,KAAZ;QACf,CAVY,MAUR;UAACI,YAAY,CAACK,UAAb,CAAwB,OAAxB;UACNV,OAAO,CAACC,GAAR,CAAY,MAAZ;QAAoB;MACvB,CAbS,EAcRe,KAdQ,CAcFd,KAAK,IAAE;QACXF,OAAO,CAACC,GAAR,CAAY,KAAZ;QACA,IAAIC,KAAK,CAACK,QAAN,CAAeU,MAAf,KAA0B,GAA9B,EACI3B,QAAQ,CAAC;UAACI,IAAI,EAAC,SAAN;UACGC,OAAO,EAAC;YACJC,IAAI,EAAC,IADD;YAEJC,OAAO,EAAC,uBAFJ;YAGJE,OAAO,EAAE;UAHL;QADX,CAAD,CAAR;QAMJM,YAAY,CAACK,UAAb,CAAwB,OAAxB;MACH,CAxBS,CAAN;IAyBH,CA1BD;EA2BH;AAhFe,CAApB;AAmFA,eAAevB,WAAf"},"metadata":{},"sourceType":"module"}