{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Eze/Desktop/Bootcamp/MyTinerary/mytinerary/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Eze/Desktop/Bootcamp/MyTinerary/mytinerary/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";var userActions={signUp:function signUp(userData){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:4000/api/auth/signUp\",{userData:userData});case 3:res=_context.sent;dispatch({type:\"MESSAGE\",payload:{view:true,message:res.data.message,success:res.data.success}});console.log(res);return _context.abrupt(\"return\",res);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();},signIn:function signIn(logedUser){// console.log(logedUser)\ntry{return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch,getState){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://localhost:4000/api/auth/signIn\",{logedUser:logedUser});case 2:res=_context2.sent;// console.log(res)\nif(res.data.success){// console.log(res.data.response);\nlocalStorage.setItem(\"token\",res.data.response.token);dispatch({type:\"USER\",payload:res.data.response.userData});}else{dispatch({type:'MESSAGE',payload:{view:true,message:res.data.message,success:res.data.success}});}return _context2.abrupt(\"return\",res);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();}catch(error){console.log(error);}},signOut:function signOut(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch,getState){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:localStorage.removeItem(\"token\");dispatch({type:\"USER\",payload:null});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();},verifyToken:function verifyToken(token){// console.log(token);\nreturn/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch,getState){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(\"http://localhost:4000/api/auth/signInToken\",{headers:{'Authorization':'Bearer '+token}}).then(function(user){if(user.data.success){// console.log(user);\ndispatch({type:\"USER\",payload:user.data.response});dispatch({type:\"MESSAGE\",payload:{view:true,message:user.data.message,success:user.data.success}});// console.log(\"lol\");\n}else{localStorage.removeItem(\"token\");console.log(\"lol2\");}}).catch(function(error){console.log(\"lol\");if(error.response.status===401)dispatch({type:\"MESSAGE\",payload:{view:true,message:\"Please, sign in again\",success:false}});localStorage.removeItem(\"token\");});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();}};export default userActions;","map":{"version":3,"names":["axios","userActions","signUp","userData","dispatch","getState","post","res","type","payload","view","message","data","success","console","log","signIn","logedUser","localStorage","setItem","response","token","error","signOut","removeItem","verifyToken","get","headers","then","user","catch","status"],"sources":["C:/Users/Eze/Desktop/Bootcamp/MyTinerary/mytinerary/frontend/src/redux/actions/userActions.js"],"sourcesContent":["import axios from \"axios\";\r\nconst userActions = {\r\n    signUp: (userData) => {\r\n        return async(dispatch, getState) => {\r\n            try {\r\n                const res = await axios.post(\"http://localhost:4000/api/auth/signUp\",{userData})\r\n                dispatch({type: \"MESSAGE\",\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    }\r\n                })\r\n                console.log(res);\r\n                return res\r\n            } catch(error){\r\n                console.log(error);\r\n            }\r\n        }\r\n    },\r\n    signIn: (logedUser) => {\r\n        // console.log(logedUser)\r\n        try {\r\n            return async (dispatch, getState) => {\r\n            const res = await axios.post(\"http://localhost:4000/api/auth/signIn\",{logedUser})\r\n            // console.log(res)\r\n            if (res.data.success) {\r\n                // console.log(res.data.response);\r\n                localStorage.setItem(\"token\", res.data.response.token)\r\n                dispatch({type:\"USER\", payload: res.data.response.userData})\r\n            } else {\r\n                dispatch({\r\n                    type: 'MESSAGE',\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    },\r\n                })\r\n            }\r\n            return res\r\n        }} catch (error){\r\n            console.log(error);\r\n        }\r\n        \r\n    },\r\n    signOut: () => {\r\n        return async (dispatch, getState) => {\r\n            localStorage.removeItem(\"token\")\r\n            dispatch({type:\"USER\", payload:null})\r\n        }\r\n    },\r\n    verifyToken: (token) => {\r\n        // console.log(token);\r\n        return async (dispatch, getState) => {\r\n            await axios.get(\"http://localhost:4000/api/auth/signInToken\", {headers:{'Authorization': 'Bearer ' + token}})\r\n            .then(user=>{if (user.data.success){\r\n                // console.log(user);\r\n                dispatch({type:\"USER\",payload:user.data.response})\r\n                dispatch({type:\"MESSAGE\",\r\n                            payload: {\r\n                                view:true,\r\n                                message:user.data.message,\r\n                                success:user.data.success\r\n                            }})\r\n                            // console.log(\"lol\");\r\n            }else{localStorage.removeItem(\"token\")\r\n            console.log(\"lol2\")}\r\n        }\r\n        ).catch(error=>{\r\n            console.log(\"lol\");\r\n            if (error.response.status === 401)\r\n                dispatch({type:\"MESSAGE\",\r\n                            payload:{\r\n                                view:true,\r\n                                message:\"Please, sign in again\",\r\n                                success: false,\r\n                            }})\r\n            localStorage.removeItem(\"token\")\r\n        })\r\n        }\r\n    }\r\n}\r\n\r\nexport default userActions\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}