{"ast":null,"code":"import axios from \"axios\";\nconst userActions = {\n  signUp: userData => {\n    return async (dispatch, getState) => {\n      try {\n        const res = await axios.post(\"http://localhost:4000/api/auth/signUp\", {\n          userData\n        });\n        dispatch({\n          type: \"MESSAGE\",\n          payload: {\n            view: true,\n            message: res.data.message,\n            success: res.data.success\n          }\n        });\n        console.log(res);\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n  },\n  signIn: logedUser => {\n    // console.log(logedUser)\n    try {\n      return async (dispatch, getState) => {\n        const res = await axios.post(\"http://localhost:4000/api/auth/signIn\", {\n          logedUser\n        }); // console.log(res)\n\n        if (res.data.success) {\n          console.log(res.data.response);\n          localStorage.setItem(\"token\", res.data.response.token);\n          dispatch({\n            type: \"USER\",\n            payload: res.data.response.userData\n          });\n        } else {\n          dispatch({\n            type: 'MESSAGE',\n            payload: {\n              view: true,\n              message: res.data.message,\n              success: res.data.success\n            }\n          });\n        }\n\n        return res;\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  },\n  // signOut: (closeUser) => {\n  //     return async (dispatch, getState) => {\n  //         const res = await axios.post(\"http://localhost:4000/api/auth/signIn\",{closeUser})\n  //         localStorage.removeItem(\"token\")\n  //         dispatch({type:\"USER\", payload:null})\n  //     }\n  // },\n  verifyToken: token => {\n    return async (dispatch, getState) => {\n      await axios.get(\"http://localhost:4000/api/auth/signInToken\", {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(user => {\n        if (user.data.success) {\n          dispatch({\n            type: \"USER\",\n            payload: user.data.response\n          });\n          dispatch({\n            type: \"MESSAGE\",\n            payload: {\n              view: true,\n              message: user.data.message,\n              success: user.data.success\n            }\n          });\n        } else {\n          localStorage.removeItem(\"token\");\n        }\n      });\n    };\n  }\n};\nexport default userActions;","map":{"version":3,"names":["axios","userActions","signUp","userData","dispatch","getState","res","post","type","payload","view","message","data","success","console","log","error","signIn","logedUser","response","localStorage","setItem","token","verifyToken","get","headers","then","user","removeItem"],"sources":["C:/Users/Eze/Desktop/Bootcamp/MyTinerary/mytinerary/frontend/src/redux/actions/userActions.js"],"sourcesContent":["import axios from \"axios\";\r\nconst userActions = {\r\n    signUp: (userData) => {\r\n        return async(dispatch, getState) => {\r\n            try {\r\n                const res = await axios.post(\"http://localhost:4000/api/auth/signUp\",{userData})\r\n                dispatch({type: \"MESSAGE\",\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    }\r\n                })\r\n                console.log(res);\r\n                return res\r\n            } catch(error){\r\n                console.log(error);\r\n            }\r\n        }\r\n    },\r\n    signIn: (logedUser) => {\r\n        // console.log(logedUser)\r\n        try {\r\n            return async (dispatch, getState) => {\r\n            const res = await axios.post(\"http://localhost:4000/api/auth/signIn\",{logedUser})\r\n            // console.log(res)\r\n            if (res.data.success) {\r\n                console.log(res.data.response);\r\n                localStorage.setItem(\"token\", res.data.response.token)\r\n                dispatch({type:\"USER\", payload: res.data.response.userData})\r\n            } else {\r\n                dispatch({\r\n                    type: 'MESSAGE',\r\n                    payload: {\r\n                        view: true,\r\n                        message: res.data.message,\r\n                        success: res.data.success\r\n                    },\r\n                })\r\n            }\r\n            return res\r\n            \r\n        }} catch (error){\r\n            console.log(error);\r\n        }\r\n        \r\n    },\r\n    // signOut: (closeUser) => {\r\n    //     return async (dispatch, getState) => {\r\n    //         const res = await axios.post(\"http://localhost:4000/api/auth/signIn\",{closeUser})\r\n    //         localStorage.removeItem(\"token\")\r\n    //         dispatch({type:\"USER\", payload:null})\r\n    //     }\r\n    // },\r\n    verifyToken: (token) => {\r\n        return async (dispatch, getState) => {\r\n            await axios.get(\"http://localhost:4000/api/auth/signInToken\", {headers:{'Authorization': 'Bearer ' + token}})\r\n            .then(user=>{if (user.data.success){\r\n                dispatch({type:\"USER\",payload:user.data.response})\r\n                dispatch({type:\"MESSAGE\",\r\n                            payload: {\r\n                                view:true,\r\n                                message:user.data.message,\r\n                                success:user.data.success\r\n                            }})\r\n            }else{\r\n                localStorage.removeItem(\"token\")\r\n            }})\r\n        }\r\n    }\r\n}\r\n\r\nexport default userActions\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,WAAW,GAAG;EAChBC,MAAM,EAAGC,QAAD,IAAc;IAClB,OAAO,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;MAChC,IAAI;QACA,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,uCAAX,EAAmD;UAACJ;QAAD,CAAnD,CAAlB;QACAC,QAAQ,CAAC;UAACI,IAAI,EAAE,SAAP;UACLC,OAAO,EAAE;YACLC,IAAI,EAAE,IADD;YAELC,OAAO,EAAEL,GAAG,CAACM,IAAJ,CAASD,OAFb;YAGLE,OAAO,EAAEP,GAAG,CAACM,IAAJ,CAASC;UAHb;QADJ,CAAD,CAAR;QAOAC,OAAO,CAACC,GAAR,CAAYT,GAAZ;QACA,OAAOA,GAAP;MACH,CAXD,CAWE,OAAMU,KAAN,EAAY;QACVF,OAAO,CAACC,GAAR,CAAYC,KAAZ;MACH;IACJ,CAfD;EAgBH,CAlBe;EAmBhBC,MAAM,EAAGC,SAAD,IAAe;IACnB;IACA,IAAI;MACA,OAAO,OAAOd,QAAP,EAAiBC,QAAjB,KAA8B;QACrC,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,uCAAX,EAAmD;UAACW;QAAD,CAAnD,CAAlB,CADqC,CAErC;;QACA,IAAIZ,GAAG,CAACM,IAAJ,CAASC,OAAb,EAAsB;UAClBC,OAAO,CAACC,GAAR,CAAYT,GAAG,CAACM,IAAJ,CAASO,QAArB;UACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8Bf,GAAG,CAACM,IAAJ,CAASO,QAAT,CAAkBG,KAAhD;UACAlB,QAAQ,CAAC;YAACI,IAAI,EAAC,MAAN;YAAcC,OAAO,EAAEH,GAAG,CAACM,IAAJ,CAASO,QAAT,CAAkBhB;UAAzC,CAAD,CAAR;QACH,CAJD,MAIO;UACHC,QAAQ,CAAC;YACLI,IAAI,EAAE,SADD;YAELC,OAAO,EAAE;cACLC,IAAI,EAAE,IADD;cAELC,OAAO,EAAEL,GAAG,CAACM,IAAJ,CAASD,OAFb;cAGLE,OAAO,EAAEP,GAAG,CAACM,IAAJ,CAASC;YAHb;UAFJ,CAAD,CAAR;QAQH;;QACD,OAAOP,GAAP;MAEH,CAnBG;IAmBF,CApBF,CAoBG,OAAOU,KAAP,EAAa;MACZF,OAAO,CAACC,GAAR,CAAYC,KAAZ;IACH;EAEJ,CA7Ce;EA8ChB;EACA;EACA;EACA;EACA;EACA;EACA;EACAO,WAAW,EAAGD,KAAD,IAAW;IACpB,OAAO,OAAOlB,QAAP,EAAiBC,QAAjB,KAA8B;MACjC,MAAML,KAAK,CAACwB,GAAN,CAAU,4CAAV,EAAwD;QAACC,OAAO,EAAC;UAAC,iBAAiB,YAAYH;QAA9B;MAAT,CAAxD,EACLI,IADK,CACAC,IAAI,IAAE;QAAC,IAAIA,IAAI,CAACf,IAAL,CAAUC,OAAd,EAAsB;UAC/BT,QAAQ,CAAC;YAACI,IAAI,EAAC,MAAN;YAAaC,OAAO,EAACkB,IAAI,CAACf,IAAL,CAAUO;UAA/B,CAAD,CAAR;UACAf,QAAQ,CAAC;YAACI,IAAI,EAAC,SAAN;YACGC,OAAO,EAAE;cACLC,IAAI,EAAC,IADA;cAELC,OAAO,EAACgB,IAAI,CAACf,IAAL,CAAUD,OAFb;cAGLE,OAAO,EAACc,IAAI,CAACf,IAAL,CAAUC;YAHb;UADZ,CAAD,CAAR;QAMH,CARY,MAQR;UACDO,YAAY,CAACQ,UAAb,CAAwB,OAAxB;QACH;MAAC,CAXI,CAAN;IAYH,CAbD;EAcH;AApEe,CAApB;AAuEA,eAAe3B,WAAf"},"metadata":{},"sourceType":"module"}